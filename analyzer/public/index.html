<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Analyzer</title>

  <!-- <link rel="icon" type="image/png" href="images/example.png"> -->

  <link rel="stylesheet" type="text/css" href="dist/styles/main.css">

  <script src="dist/bundle.js"></script>
</head>

<body>

<div id="wrapper" class="container">

  <div class="top" v-if="games && games.length > 0">
    <div class="select-game">
      <label for="select-game">Select game:</label>
      <select
        id="select-game"
        v-model="currGame">
        <option
          v-for="(game,index) in games"
          v-bind:value="index">
          {{ game.date | formatTime }} ({{ game.gameId }})
        </option>
      </select>
    </div>

    <div class="controls">
      <ul class="timeline-nav">
        <li>
          <a v-on:click="currTurn = 0">
            &laquo;
          </a>
        </li>
        <li>
          <a v-on:click="(currTurn > 0) ? currTurn-- : false">
            &lsaquo;
          </a>
        </li>
        <li>
          <a v-on:click="(currTurn < games[currGame].history.length - 1) ? currTurn++ : false">&rsaquo;</a>
        </li>
        <li>
          <a v-on:click="currTurn = games[currGame].history.length - 1">
            &raquo;
          </a>
        </li>
      </ul>
      <ul class="timeline">
        <li
          v-bind:class="{'active':(index === currTurn)}"
          v-for="(state,index) in games[currGame].history"
          v-on:click="currTurn = index">
          <span class="turn">{{ currTurn }}</span>
        </li>
      </ul>
    </div>
  </div>

  <div class="cols">
    <div class="viz">
      <board class="board-wrapper" :state="games[currGame].history[currTurn]" :overlay="games[currGame].overlay[currTurn]"></board>
      <p><a v-on:click="consoleDir(games[currGame].history[currTurn])">board data to console &rsaquo;</a></p>
      <ul>
        <li>turn: <span class="info-val">{{ currTurn }}</span></li>
        <li v-for="snake in games[currGame].history[currTurn].board.snakes">{{ snake.name }}: <span class="info-val">{{ snake.health }}</span></li>
      </ul>
    </div>
    <div class="info">
      <h4>Log</h4>
      <ul class="log">
        <li v-for="(log,index) in games[currGame].log[currTurn]">{{ games[currGame].log[currTurn][index] }}</li>
      </ul>
      <h4 v-if="games[currGame].dir[currTurn].length">Dir</h4>
      <ul class="log" v-if="games[currGame].dir[currTurn].length">
        <li v-for="(dir,index) in games[currGame].dir[currTurn]">{{ games[currGame].dir[currTurn][index] }}</li>
      </ul>
      <span v-for="(dir,index) in games[currGame].dir[currTurn]">{{ consoleDir(games[currGame].dir[currTurn][index]) }}</span>
    </div>
  </div>

  <div v-if="!games || games.length == 0">
    <h2>No games to analyze.</h2>
  </div>

</div><!-- end #wrapper -->

</body>
</html>
